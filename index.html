<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Julkalender</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-image: url('background.jpg');
      background-size: cover;
      background-position: center;
      height: 100vh;
      color: white;
      overflow: hidden;
    }

    .calendar {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .door {
      position: absolute;
      width: 8%;
      height: 8%;
      border: 2px dashed rgba(255, 255, 255, 0.8);
      background-color: rgba(255, 255, 255, 0.05);
      cursor: pointer;
      transition: transform 1s ease-in-out;
      transform-style: preserve-3d;
      transform-origin: left center;
    }

    .door.closed {
      transform: rotateY(0deg);
    }

    .door.opened {
      transform: rotateY(120deg);
    }

    .door .front {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .door .front span {
      font-size: 1.5em;
      font-family: 'Georgia', serif;
      color: white;
    }

    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      transform-origin: center;
      width: 90%;
      max-width: 1000px;
      padding: 30px;
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      text-align: left;
      display: none;
      z-index: 100;
      animation: zoomIn 0.5s forwards;
    }

    @keyframes zoomIn {
      0% {
        transform: translate(-50%, -50%) scale(0);
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
      }
    }

    .popup img {
      max-width: 100%;
      max-height: 300px;
      margin-bottom: 15px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    .popup .text-content {
      max-height: 400px;
      overflow-y: auto;
      font-family: 'Times New Roman', serif;
      font-size: 16px;
      color: black;
      line-height: 1.8;
      margin: 0;
    }

    .popup .close {
      display: inline-block;
      margin-top: 15px;
      padding: 10px 15px;
      background-color: red;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .popup a {
      text-decoration: none;
      color: blue;
      display: inline-block;
      margin-top: 15px;
    }

    .image-placeholder {
      position: absolute;
      width: 8%;
      height: 8%;
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      display: none;
    }

    .image-placeholder.visible {
      display: block;
    }
  </style>
</head>
<body>
  <div class="calendar">
    <!-- Luckor och bilder 1–24 -->
    <div class="door closed" id="door1" style="top: 8%; left: 10%;">
      <div class="front"><span>1</span></div>
      <div class="back">1</div>
    </div>
    <div class="image-placeholder" id="image1" style="top: 8%; left: 10%; background-image: url('image1.jpg');"></div>
    <div class="door closed" id="door2" style="top: 20%; left: 25%;">
      <div class="front"><span>2</span></div>
      <div class="back">2</div>
    </div>
    <div class="image-placeholder" id="image2" style="top: 20%; left: 25%; background-image: url('image2.jpg');"></div>
    <div class="door closed" id="door3" style="top: 12%; left: 58%;">
      <div class="front"><span>3</span></div>
      <div class="back">3</div>
    </div>
    <div class="image-placeholder" id="image3" style="top: 12%; left: 58%; background-image: url('image3.jpg');"></div>
    <!-- Fortsätt med luckor och bilder för 4–24 -->
  </div>
<div class="door closed" id="door4" style="top: 30%; left: 12%;">
    <div class="front"><span style="color: yellow;">4</span></div>
    <div class="back">4</div>
  </div>
  <div class="image-placeholder" id="image4" style="top: 30%; left: 12%; background-image: url('image4.jpg');"></div>

<div class="door closed" id="door5" style="top: 28%; left: 70%;">
    <div class="front"><span style="color: white;">5</span></div>
    <div class="back">5</div>
  </div>
  <div class="image-placeholder" id="image5" style="top: 28%; left: 70%; background-image: url('image5.jpg');"></div>

<div class="door closed" id="door6" style="top: 45%; left: 20%;">
  <div class="front"><span style="color: white;">6</span></div>
  <div class="back">6</div>
</div>
<div class="image-placeholder" id="image6" style="top: 45%; left: 20%; background-image: url('image6.jpg');"></div>

<div class="door closed" id="door7" style="top: 48%; left: 57%;">
  <div class="front"><span style="color: red;">7</span></div>
  <div class="back">7</div>
</div>
<div class="image-placeholder" id="image7" style="top: 48%; left: 57%; background-image: url('image7.jpg');"></div>

<div class="door closed" id="door8" style="top: 50%; left: 75%;">
  <div class="front"><span style="color: white;">8</span></div>
  <div class="back">8</div>
</div>
<div class="image-placeholder" id="image8" style="top: 50%; left: 75%; background-image: url('image8.jpg');"></div>

<div class="door closed" id="door9" style="top: 60%; left: 65%;">
  <div class="front"><span style="color: yellow;">9</span></div>
  <div class="back">9</div>
</div>
<div class="image-placeholder" id="image9" style="top: 60%; left: 65%; background-image: url('image9.jpg');"></div>

<div class="door closed" id="door10" style="top: 70%; left: 8%;">
  <div class="front"><span style="color: red;">10</span></div>
  <div class="back">10</div>
</div>
<div class="image-placeholder" id="image10" style="top: 70%; left: 8%; background-image: url('image10.jpg');"></div>

<div class="door closed" id="door11" style="top: 80%; left: 32%;">
  <div class="front"><span style="color: white;">11</span></div>
  <div class="back">11</div>
</div>
<div class="image-placeholder" id="image11" style="top: 80%; left: 32%; background-image: url('image11.jpg');"></div>

<div class="door closed" id="door12" style="top: 25%; left: 50%;">
  <div class="front"><span style="color: black;">12</span></div>
  <div class="back">12</div>
</div>
<div class="image-placeholder" id="image12" style="top: 25%; left: 50%; background-image: url('image12.jpg');"></div>

<div class="door closed" id="door13" style="top: 18%; left: 80%;">
  <div class="front"><span style="color: red;">13</span></div>
  <div class="back">13</div>
</div>
<div class="image-placeholder" id="image13" style="top: 18%; left: 80%; background-image: url('image13.jpg');"></div>

<div class="door closed" id="door14" style="top: 85%; left: 60%;">
  <div class="front"><span style="color: white;">14</span></div>
  <div class="back">14</div>
</div>
<div class="image-placeholder" id="image14" style="top: 85%; left: 60%; background-image: url('image14.jpg');"></div>

<div class="door closed" id="door15" style="top: 90%; left: 15%;">
  <div class="front"><span style="color: yellow;">15</span></div>
  <div class="back">15</div>
</div>
<div class="image-placeholder" id="image15" style="top: 90%; left: 15%; background-image: url('image15.jpg');"></div>

<div class="door closed" id="door16" style="top: 35%; left: 40%;">
  <div class="front"><span style="color: white;">16</span></div>
  <div class="back">16</div>
</div>
<div class="image-placeholder" id="image16" style="top: 35%; left: 40%; background-image: url('image16.jpg');"></div>

<div class="door closed" id="door17" style="top: 88%; left: 5%;">
  <div class="front"><span style="color: red;">17</span></div>
  <div class="back">17</div>
</div>
<div class="image-placeholder" id="image17" style="top: 88%; left: 5%; background-image: url('image17.jpg');"></div>

<div class="door closed" id="door18" style="top: 60%; left: 40%;">
  <div class="front"><span style="color: yellow;">18</span></div>
  <div class="back">18</div>
</div>
<div class="image-placeholder" id="image18" style="top: 60%; left: 40%; background-image: url('image18.jpg');"></div>

<div class="door closed" id="door19" style="top: 10%; left: 70%;">
  <div class="front"><span style="color: black;">19</span></div>
  <div class="back">19</div>
</div>
<div class="image-placeholder" id="image19" style="top: 10%; left: 70%; background-image: url('image19.jpg');"></div>

<div class="door closed" id="door20" style="top: 88%; left: 85%;">
  <div class="front"><span style="color: white;">20</span></div>
  <div class="back">20</div>
</div>
<div class="image-placeholder" id="image20" style="top: 88%; left: 85%; background-image: url('image20.jpg');"></div>

<div class="door closed" id="door21" style="top: 58%; left: 50%;">
  <div class="front"><span style="color: red;">21</span></div>
  <div class="back">21</div>
</div>
<div class="image-placeholder" id="image21" style="top: 58%; left: 50%; background-image: url('image21.jpg');"></div>

<div class="door closed" id="door22" style="top: 65%; left: 18%;">
  <div class="front"><span style="color: yellow;">22</span></div>
  <div class="back">22</div>
</div>
<div class="image-placeholder" id="image22" style="top: 65%; left: 18%; background-image: url('image22.jpg');"></div>

<div class="door closed" id="door23" style="top: 68%; left: 28%;">
  <div class="front"><span style="color: black;">23</span></div>
  <div class="back">23</div>
</div>
<div class="image-placeholder" id="image23" style="top: 68%; left: 28%; background-image: url('image23.jpg');"></div>

<div class="door closed" id="door24" style="top: 16%; left: 42%;">
  <div class="front"><span style="color: red;">24</span></div>
  <div class="back">24</div>
</div>
<div class="image-placeholder" id="image24" style="top: 16%; left: 42%; background-image: url('image24.jpg');"></div>


  <div class="popup" id="popup">
    <img id="popupImage" src="" alt="Bild">
    <div class="text-content" id="popupText"></div>
    <a id="popupPdf" href="#" target="_blank" style="display: none;">Dagens grej</a>
    <div class="close" onclick="closePopup()">Stäng</div>
  </div>

  <script>
    async function fetchHtmlContent(filePath) {
      try {
        const response = await fetch(filePath);
        if (!response.ok) {
          throw new Error("Kunde inte läsa in HTML-filen");
        }
        const text = await response.text();
        return text;
      } catch (error) {
        console.error(error);
        return "<p>Texten kunde inte läsas in.</p>";
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const today = new Date();
      const currentDay = today.getDate();
      const currentMonth = today.getMonth(); // Kontrollera månaden (0 = januari)

      for (let i = 1; i <= 24; i++) {
        const door = document.getElementById(`door${i}`);
        const image = document.getElementById(`image${i}`);
        const popup = document.getElementById('popup');
        const popupImage = document.getElementById('popupImage');
        const popupText = document.getElementById('popupText');
        const popupPdf = document.getElementById('popupPdf');

        if (door && image && popup) {
          if (currentMonth === 11 && i <= currentDay) {
            door.addEventListener('click', async () => {
              door.classList.add('opened');
              image.classList.add('visible');

              // Läs in HTML-text för luckan
              const textContent = await fetchHtmlContent(`${i}.html`);
              popupText.innerHTML = textContent;

              // Visa eventuell PDF-länk
              const pdfPath = `${i}.pdf`;
              try {
                const pdfResponse = await fetch(pdfPath);
                if (pdfResponse.ok) {
                  popupPdf.href = pdfPath;
                  popupPdf.style.display = 'inline-block';
                } else {
                  popupPdf.style.display = 'none';
                }
              } catch {
                popupPdf.style.display = 'none';
              }

              popupImage.src = `image${i}.jpg`;
              popup.style.display = 'block';
            });
          } else {
            door.style.pointerEvents = 'none';
          }
        }
      }
    });

    function closePopup() {
      const popup = document.getElementById('popup');
      if (popup) {
        popup.style.display = 'none';
      }
    }
  </script>
</body>
</html>
